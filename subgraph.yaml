specVersion: 0.0.2
schema:
    file: ./schema.graphql
dataSources:
    - kind: ethereum/contract
      name: Comptroller
      network: mainnet
      source:
          address: "0x3d9819210A31b4961b30EF54bE2aeD79B9c9Cd3B"
          abi: Comptroller
          startBlock: 7700000
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.5
          language: wasm/assemblyscript
          file: ./src/mapping/comptroller.ts
          entities:
              - Protocol
              - Market
          abis:
              - name: CToken
                file: ./abis/ctoken.json
              - name: Comptroller
                file: ./abis/comptroller.json
              - name: ERC20
                file: ./abis/erc20.json
              - name: PriceOracle1
                file: ./abis/price-oracle-1.json
              - name: PriceOracle2
                file: ./abis/price-oracle-2.json
          eventHandlers:
              - event: MarketListed(address)
                handler: handleMarketListed
              - event: NewPriceOracle(address,address)
                handler: handleNewPriceOracle
templates:
    - name: CToken
      kind: ethereum/contract
      network: mainnet
      source:
          abi: CToken
      mapping:
          kind: ethereum/events
          apiVersion: 0.0.5
          language: wasm/assemblyscript
          file: ./src/mapping/ctoken.ts
          entities:
              - Protocol
              - Market
          abis:
              - name: CToken
                file: ./abis/ctoken.json
              - name: ERC20
                file: ./abis/erc20.json
              - name: Comptroller
                file: ./abis/comptroller.json
              - name: PriceOracle1
                file: ./abis/price-oracle-1.json
              - name: PriceOracle2
                file: ./abis/price-oracle-2.json
          eventHandlers:
              - event: Mint(address,uint256,uint256)
                handler: handleMint
              - event: Redeem(address,uint256,uint256)
                handler: handleRedeem
              - event: Borrow(address,uint256,uint256,uint256)
                handler: handleBorrow
              - event: RepayBorrow(address,address,uint256,uint256,uint256)
                handler: handleRepayBorrow
              - event: LiquidateBorrow(address,address,uint256,address,uint256)
                handler: handleLiquidateBorrow
              - event: AccrueInterest(uint256,uint256,uint256,uint256)
                handler: handleAccrueInterest
              - event: NewReserveFactor(uint256,uint256)
                handler: handleNewReserveFactor
graft:
    base: QmNfwN29qrsJ2A7SwS1T155avbEZsMJ7upjJpBWWMKvar8
    block: 12949660
